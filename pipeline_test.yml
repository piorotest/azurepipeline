variables:
   URL_SHELL: $(URL)
   API_KEY_SHELL: $(API_KEY)
   PIPENAME_SHELL: $(Build.BuildNumber)

pool:
  name: Azure Pipelines

resources:
  repositories:
  - repository: templates
    type: git
    name: pipeline_test/pipeline_test
    ref: refs/heads/main


extends: 
  template: pipedb_runtest.yml@templates
  parameters:
    usersteps:

    - task: Bash@3
      inputs:
        targetType: 'inline'
        script: |
              docker run -v $(Build.SourcesDirectory)/schema:/liquibase/changelog liquibase/liquibase:latest --changeLogFile changelog/main.xml --url "jdbc:sqlserver://10.160.1.200;DatabaseName=test;encrypt=true;trustServerCertificate=true" --username lb --password lb  update
      displayName: Deploy code

    - task: Bash@3
      inputs:
        targetType: 'inline'
        script: |
          echo "placeholder"
          exit 1
      displayName: Run destrictive test

